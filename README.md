# 🎨 Anima WebUI <small>v1.2.2</small>

**Anima WebUI** は、ComfyUI をバックエンドとして利用し、直感的な操作で高品質な画像生成を行うための Gradio ベースの Web UI です。
最新の v1.2.2 では、UI の省スペース化を追求し、プロンプト入力をより快適にする**翻訳アコーディオン・ブリッジ**を搭載しました。

---

### 🎯 想定するユーザ層

* **ComfyUI を既に導入済み、あるいは自力でインストールできる方**
* **必要なモデル（Checkpoint 等）を自身でダウンロードし、所定のフォルダへ配置できる方**
* **技術的な前提条件を理解し、画像生成環境の構築に抵抗がない方**

---

### 🛠 事前準備

このアプリを動かすには、以下の環境とモデルデータが必要です。

#### 1. ソフトウェア環境

* **Python 3.12.x**: インストール時に必ず **[Add Python to PATH]** にチェックを入れてください。
* **ComfyUI**: 画像生成のバックエンドとして動作している必要があります。

#### 2. モデル & ワークフローの導入

[Hugging Face (circlestone-labs/Anima)](https://huggingface.co/circlestone-labs/Anima) から以下のファイルをダウンロードし、配置してください。

* **モデルファイル**: `Anima-v1-0.safetensors` 等を ComfyUI 本体の `models/checkpoints/` フォルダへ配置します。
* **ワークフローファイル**: `anima-t2i.json` を本アプリのルートフォルダに配置してください。

---

### 🚀 セットアップと起動手順

1. **リポジトリのクローン**
```powershell
git clone https://github.com/okpn/anima-webui.git
cd anima-webui

```


2. **設定ファイルの準備**
* `config.json.sample` をコピーして、名前を **`config.json`** に変更します。
* **System タブ** または直接ファイルを編集し、`comfy_url` や `DEEPL_API_KEY` を設定してください。


3. **起動**
* `start_anima_webui.bat` を実行します。



---

### 💡 主な機能 (v1.2.2)

| タブ名 | 機能概要 |
| --- | --- |
| **Generate** | **翻訳アコーディオン**: 翻訳、反映ボタン、APIキー設定を一つの折り畳みメニューに集約。 <br>

<br> **年代スロット**: 1950年〜2026年まで、最大3つの年代を混合指定可能。 <br>

<br> **Quick Server Control**: 生成画面から直接 ComfyUI の起動確認と再起動が可能。 |
| **History** | **完全復元履歴**: 生成時の全21パラメータ（混合年代、シード、解像度等）を完璧に復元。 <br>

<br> **URL自動修復**: スマホ連携時の画像パス問題を解決するクリーンアップ機能を搭載。 |
| **System** | **IP自動検出**: サーバーのローカルIPを自動検出し、ワンクリックでセット可能。 <br>

<br> **設定管理**: タグリスト、解像度プリセット、外部リンク設定を UI 上で直接編集可能。 |

---

### ⚠️ 注意事項

* **設定の保護**: `config.json` には API キーが含まれるため、GitHub 等に公開しないでください。
* **二重起動の防止**: ComfyUI の重複起動を防止する安全ロジックを搭載しています。
* **Windows クラッシュ回避**: URL 構成時の不要な空白を自動除去し、ファイルパスエラーを防ぎます。

---

### 📜 License / ライセンス

#### ソフトウェア本体

本アプリは **Polyform Noncommercial License 1.0.0** を採用しています。
個人での利用や研究目的での配布は自由ですが、**アプリそのものを販売することは禁止**しています。

#### 生成物の取り扱い

* 本アプリを使用して出力された画像について、開発者は権利を主張しません。
* ただし、商用利用の可否は、使用した **AIモデル（Checkpoint等）のライセンス** に依存します。

---

### 📈 Version History (変遷)

* **v1.2.2 (最新)**: **DeepL 翻訳セクションをアコーディオン化。** UI の垂直スペースを削減し、プロンプト入力エリアの視認性を向上。
* **v1.2.1**: 外部リンク編集機能、ネガティブプロンプト位置整理、二重起動防止。
* **v1.2.0**: 年代混合スロット（1950-2026）、IP自動検出機能、履歴復元パラメータの大幅強化。
* **v1.1.1**: 初期リリース。DeepL 連携、基本履歴機能、タグ管理。

---
