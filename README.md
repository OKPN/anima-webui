# 🎨 Anima WebUI <small>v1.2.4</small>

**Anima WebUI** は、ComfyUI をバックエンドとして利用し、直感的な操作で高品質な画像生成を行うための Gradio ベースの Web UI です。
最新の v1.2.4 では、プロンプトの「積み上げ」を可能にするインテリジェントな翻訳連携機能を導入しました。

---

### 🎯 想定するユーザ層

* **ComfyUI を既に導入済み、あるいは自力でインストールできる方**
* **必要なモデルを自身でダウンロードし、所定のフォルダへ配置できる方**
* **技術的な前提条件を理解し、画像生成環境の構築に抵抗がない方**

---

### 🛠 事前準備

#### 1. ソフトウェア環境

* **Python 3.12.x**: インストール時に必ず **[Add Python to PATH]** にチェックを入れてください。
* **ComfyUI**: 画像生成のバックエンドとして動作している必要があります。

#### 2. モデル & ワークフローの導入

* **モデルファイル**: `models/checkpoints/` フォルダへ配置してください。
* **ワークフローファイル**: `anima-t2i.json` を本アプリのルートフォルダに配置してください。

---

### 🚀 セットアップと起動手順

1. **リポジトリの準備**

```powershell
git clone https://github.com/okpn/anima-webui.git
cd anima-webui

```

2. **設定ファイルの準備**

* `config.json.sample` をコピーして **`config.json`** を作成します。
* **System タブ** またはファイルを編集し、`comfy_url` や `DEEPL_API_KEY` を設定してください。

3. **起動**

* `start_anima_webui.bat` を実行します。

---

### 💡 主な機能 (v1.2.4)

| タブ名 | 機能概要 |
| --- | --- |
| **Generate** | **インテリジェント Append ボタン**: 【新機能】翻訳結果を現在のプロンプトの末尾に自動でカンマ（`, `）を添えて追記します。 <br>

<br>

<br> **Custom Tags (My Palette)**: ユーザー独自の「秘伝のタグ」をワンタップで追加・管理可能。 <br>

<br>

<br> **翻訳アコーディオン**: 翻訳、反映、追記、API設定をコンパクトに集約。 |
| **History** | **全 22 パラメータ復元**: 混合年代、シード、解像度、そして Custom Tags を含めた全設定を完璧に再現。 <br>

<br>

<br> **URL 自動修復**: スマホ連携時の画像表示トラブルを回避するクリーンアップ機能。 |
| **System** | **ミニマル Config**: 設定ファイルから不要な項目を排除し、必要な項目だけを記述するスマートな運用に対応。 <br>

<br>

<br> **IP 自動検出**: サーバーのローカル IP を検出し、スマホからのアクセスをワンクリックで設定可能。 |

---

### ⚠️ 注意事項

* **プロンプト自動清掃**: Append ボタンは、現在のプロンプト末尾にある不要なカンマやスペースを自動で削除してから結合します。
* **Windows の AI 優先管理**: 本アプリは、Windows が AI 処理のために用意したメモリ退避路やリソース管理を最大限に活用します。
* **二重起動防止**: ComfyUI の重複起動を防止する安全ロジックを継承しています。

---

### 📈 Version History

* **v1.2.4 (最新)**: **DeepL 翻訳に「➕ Append to Positive Prompt」ボタンを追加。** プロンプトの段階的な構築が可能に。
* **v1.2.3**: Custom Tags (My Palette) 搭載。設定ファイルのミニマル化、履歴復元パラメータの 22 種拡張。
* **v1.2.2**: DeepL 翻訳セクションのアコーディオン化。UI の垂直スペース削減。
* **v1.2.0**: 年代混合スロット（1950-2026）、IP 自動検出、履歴機能の大幅強化。

---

### 📜 License

本アプリは **Polyform Noncommercial License 1.0.0** を採用しています。個人利用・研究目的は自由ですが、商用販売は禁止です。

